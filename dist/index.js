!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=2)}([function(t){t.exports=JSON.parse('{"debug":true,"database":{"mysql":{"host":"localhost","user":"root","password":"gitarre2k","database":"datagrabber"}}}')},function(t,e,r){"use strict";var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const o=n(r(0));e.Debug=function(t){!0===o.debug&&console.log("[Debug]: "+t)}},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function u(t){try{s(n.next(t))}catch(t){i(t)}}function a(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(u,a)}s((n=n.apply(t,e||[])).next())})},o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const u=o(r(3)),a=o(r(4)),s=i(r(5)),c=r(1);class l{constructor(){this.argv=u.command("target","Tells which site to grab",{site:{description:"the site to clone",alias:"t"}}).command("outputall","Output all from database",{site:{description:"output entries",alias:"outall"}}).command("output","Output from database",{site:{description:"output entry",alias:"o"}}).option("quiet",{alias:"q",description:"Tells the program to be quiet"}).option("follow",{alias:"f",description:"Follow the links"}).help().alias("help","h").argv}Execute(){this.argv.target&&(this.Install(),this.GrabSite(this.argv.target)),this.argv.outputall&&this.OutputAll(this.argv.outputall),this.argv.output&&this.Output(this.argv.output)}Install(){return n(this,void 0,void 0,function*(){return yield s.default.QueryAsync("CREATE TABLE IF NOT EXISTS `datagrab` (\n            `Id` int(11) NOT NULL AUTO_INCREMENT,\n            `CreatedAt` datetime DEFAULT NULL,\n            `SourceUrl` varchar(255) DEFAULT NULL,\n            `Sourcecode` longtext DEFAULT NULL,\n            PRIMARY KEY (`Id`)\n          ) ENGINE=InnoDB DEFAULT CHARSET=utf8;")})}static SaveSource(t,e){return n(this,void 0,void 0,function*(){console.log("Saving Source: "+JSON.stringify(t)),(yield s.default.QueryAsync(`INSERT INTO datagrab (CreatedAt, SourceUrl, Sourcecode) VALUES ('${(new Date).toISOString().slice(0,19).replace("T"," ")}','${t}', '${escape(e)}');`))&&(c.Debug("Object saved..."),process.exit())})}Output(t){return n(this,void 0,void 0,function*(){var e=yield s.default.Query(`SELECT * from datagrab where Id=${t}`);void 0!==e&&e.forEach(t=>{c.Debug(unescape(t.Sourcecode))}),process.exit()})}OutputAll(t){return n(this,void 0,void 0,function*(){var t=yield s.default.Query("SELECT * from datagrab");void 0!==t&&t.forEach(t=>{c.Debug(unescape(t.Sourcecode))}),process.exit()})}GrabSite(t){console.log("Grabbing Site: "+t);try{var e={method:"GET",uri:t,headers:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36"}};a.get(e).then(function(e){return n(this,void 0,void 0,function*(){yield l.SaveSource(t,e)})})}catch(t){console.log("Error: "+JSON.stringify(t)),process.exit()}}}e.default=l,(new l).Execute()},function(t,e){t.exports=require("yargs")},function(t,e){t.exports=require("request-promise")},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function u(t){try{s(n.next(t))}catch(t){i(t)}}function a(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(u,a)}s((n=n.apply(t,e||[])).next())})},o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const i=o(r(6)),u=o(r(0)),a=r(1);var s=i.createPool(u.database.mysql);class c{Connect(){return new Promise((t,e)=>{try{a.Debug("Creating new Database connection");var r=i.createConnection(u.database.mysql);r.connect((n,o)=>{n?e(n):t(r)})}catch(t){e(t)}})}Disconnect(t){return a.Debug("Closing Database connection"),new Promise((e,r)=>{t.destroy(),t=null})}QueryAsync(t){return new Promise((e,r)=>n(this,void 0,void 0,function*(){try{s.getConnection((n,o)=>{a.Debug("Executing Query: "+t),o.query(t,(t,n,o)=>{null!==t&&r(t),e({results:n,fields:o})})})}catch(t){r(t)}}))}Query(t){return n(this,void 0,void 0,function*(){try{return(yield this.QueryAsync(t)).results}catch(t){console.log(t)}})}}e.Database=c;var l=new c;e.default=l},function(t,e){t.exports=require("mysql")}]);